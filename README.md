# üó£ TG Voice to Text (RU) ‚Äî n8n workflow —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º —Ä–µ—á–∏ —á–µ—Ä–µ–∑ VOSK

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π n8n-–≤–æ—Ä–∫—Ñ–ª–æ—É, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ Telegram-–±–æ—Ç–∞.  
–í –æ—Å–Ω–æ–≤–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–æ—Ñ–ª–∞–π–Ω-–¥–≤–∏–∂–æ–∫ VOSK**, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–π –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.  
–ù–∞ –≤—ã—Ö–æ–¥–µ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ –±–æ—Ç –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, AI-–∞–≥–µ–Ω—Ç—É).

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `wf_tgvoicetotxt_prefs.json`

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª:

```json
{
  "telegram_valid_id": [111111111, 222222222],
  "tg_bot_token": "<—Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ Telegram>",
  "model_path": "<–ø—É—Ç—å –∫ —Å–∫–∞—á–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ VOSK>",
  "ffmpeg_path": "ffmpeg",
  "tmp_folder": "<–ø—É—Ç—å –∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–ø–∫–µ>",
  "no_acc_msg": "–î–æ—Å—Ç—É–ø –∫ –±–æ—Ç—É –∑–∞–ø—Ä–µ—â–µ–Ω. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.",
  "bot_help_msg": "–ë–æ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ä—É—Å—Å–∫—É—é —Ä–µ—á—å –≤ —Ç–µ–∫—Å—Ç. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∞—É–¥–∏–æ —Å –≤–∞—à–µ–π —Ä–µ—á—å—é.",
  "waiting_msg": "–°–µ–∫—É–Ω–¥–æ—á–∫—É..."
}
```

- üîê **`telegram_valid_id`** ‚Äî —Å–ø–∏—Å–æ–∫ ID Telegram-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–∑—Ä–µ—à—ë–Ω –¥–æ—Å—Ç—É–ø –∫ –±–æ—Ç—É.  
  –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç—ã–º (`[]`), –±–æ—Ç —Å–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**.

- üåê **`model_path`** ‚Äî –ø—É—Ç—å –∫ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ VOSK.  
  –î–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ —Å–∫–∞—á–∞–π—Ç–µ –Ω—É–∂–Ω—É—é –º–æ–¥–µ–ª—å –Ω–∞ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ VOSK](https://alphacephei.com/vosk/models) –∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –Ω–µ–π.  
  **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–ª—ã–µ –º–æ–¥–µ–ª–∏ (`small`) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç–æ–∫–∞.**

---

## üì¶ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Credentials –≤ n8n**  
   –î–æ–±–∞–≤—å—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Telegram Bot API –≤ —Ä–∞–∑–¥–µ–ª–µ **Credentials** n8n (–≤–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –æ—Ç –≤–∞—à–µ–≥–æ –±–æ—Ç–∞).

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ `ffmpeg`**  
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ `ffmpeg` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–µ:
   - –ª–∏–±–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PATH`
   - –ª–∏–±–æ —É–∫–∞–∂–∏—Ç–µ **–ø–æ–ª–Ω—ã–π –ø—É—Ç—å** –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `ffmpeg_path` –≤ `wf_tgvoicetotxt_prefs.json`  
     –ï—Å–ª–∏ `ffmpeg` –¥–æ—Å—Ç—É–ø–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å `"ffmpeg"`.

3. **[n8n](https://n8n.io/)** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

4. **[Python 3.7+](https://www.python.org/)**

5. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ VOSK –¥–ª—è Python:**

   ```bash
   pip install vosk
   ```

6. **–°–∫–∞—á–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å VOSK (—Ä—É—Å—Å–∫–∞—è –∏–ª–∏ –¥—Ä—É–≥–∞—è)**  
   –°–∫–∞—á–∞—Ç—å –º–æ–∂–Ω–æ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ VOSK](https://alphacephei.com/vosk/models)  
   –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `model_path` —Ñ–∞–π–ª–∞ `wf_tgvoicetotxt_prefs.json`.  
   **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–ª—ã–µ –º–æ–¥–µ–ª–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `vosk-model-small-ru-0.22`) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç–æ–∫–∞.

---

## ‚ñ∂Ô∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `TG_Voice_to_Txt_RU.json` –≤ n8n.
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `wf_tgvoicetotxt_prefs.json` –ø–æ–¥ —Å–≤–æ—é —Å—Ä–µ–¥—É.
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `WF_TGVOICETOTXT_PATH` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—É—Ç—å, –≥–¥–µ –ª–µ–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç `voicetotxt.py`.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–æ—Ä–∫—Ñ–ª–æ—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–≤–æ–µ–º—É –±–æ—Ç—É –≤ Telegram.

# Description in English

# üó£ TG Voice to Text (RU) ‚Äî n8n workflow with speech recognition via VOSK

This project is an **n8n workflow** that allows you to recognize Russian voice messages sent to a Telegram bot.  
It uses the **offline VOSK engine**, which does not require cloud services.  
The output is the recognized text, which can be sent back to the bot or passed to the next processing stage (e.g., an AI agent).

---

## ‚öôÔ∏è Variables and settings from `wf_tgvoicetotxt_prefs.json`

Before running the workflow, configure the following JSON file:

```json
{
  "telegram_valid_id": [111111111, 222222222],
  "tg_bot_token": "<your Telegram bot token>",
  "model_path": "<path to downloaded VOSK model>",
  "ffmpeg_path": "ffmpeg",
  "tmp_folder": "<path to temporary folder>",
  "no_acc_msg": "Access to the bot is denied. Contact the administrator.",
  "bot_help_msg": "The bot recognizes Russian speech and converts it to text. Send an audio message to the bot.",
  "waiting_msg": "Just a second..."
}
```

- üîê **`telegram_valid_id`** ‚Äî list of Telegram user IDs who are allowed to use the bot.  
  If the list is left empty (`[]`), **all users** will be able to use the bot.

- üåê **`model_path`** ‚Äî path to the unpacked VOSK model folder.  
  To use other languages, download the appropriate model from the [official VOSK website](https://alphacephei.com/vosk/models) and specify its path.  
  **It's recommended to use small models (e.g., `vosk-model-small-ru`) for better performance.**
  
---

## üì¶ Prerequisites

1. **Set up Telegram Credentials in n8n**  
   Add Telegram Bot API credentials in the **Credentials** section of n8n (insert your bot token).

2. **Install `ffmpeg`**  
   Make sure the `ffmpeg` utility is installed:
   - Either added to the system `PATH`, or  
   - Provide the full path in the `ffmpeg_path` field in `wf_tgvoicetotxt_prefs.json`  
     If `ffmpeg` is available globally, you can simply write `"ffmpeg"`.

3. **[n8n](https://n8n.io/)** ‚Äî installed locally or on your server

4. **[Python 3.7+](https://www.python.org/)**

5. **Install VOSK for Python:**

```bash
pip install vosk
```

6. **Downloaded VOSK model (Russian or another language)**  
   You can download it from the [official VOSK models page](https://alphacephei.com/vosk/models).  
   Specify the path to the unpacked model folder in the `model_path` variable inside `wf_tgvoicetotxt_prefs.json`.  
   **Using small models is recommended to speed up the workflow.**

---

## ‚ñ∂Ô∏è How to use

1. Import the file `TG_Voice_to_Txt_RU.json` into your n8n instance.
2. Edit `wf_tgvoicetotxt_prefs.json` with the correct paths and values for your setup.
3. Ensure the environment variable `WF_TGVOICETOTXT_PATH` points to the folder where `voicetotxt.py` is located.
4. Start the workflow and send a voice message to your Telegram bot.
